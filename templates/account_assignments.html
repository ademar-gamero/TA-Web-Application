
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
      <style>
        .center {
            text-align:center;
            margin-left: auto;
            margin-right: auto;
            width: 80%;

        }
        .center2 {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }
        .center3 {
            margin: auto;
            width: 100%;
        }
         table,th,td{
            border: 1px solid black;
            padding: 5px;
            border-collapse: collapse;
        }
    </style>
    <title>Account Assignments</title>
</head>
<body>
<form action="/Home/accountList/accountAssignment/{{curr_user.pk}}/" method="post"> 
    {% csrf_token %}
    <h1 class = "center" >{{curr_user.name}} {{curr_user.role}} Assignments</h1>
    <div class = "center2" align="center">
            <br>
            <br>
            <br>
            Assigned Course(s): 
            <br>
            <br>
        {%if not courses %}
            <p> User is not assigned to any courses </p>
    {% else %}
    <table>
      <tr>
        <th>Course Subject</th>
        <th>Course ID</th>
        <th>Semester</th>
          {% if usr_role == "Admin" %}
        <th>Remove Course Assignment</th>
          {% endif %}
      </tr>
           {% for course in courses %}
            <tr>
              <td>{{ course.course_id }}</td>
              <td>{{ course.course_name }}</td>
              <td>{{ course.semester }}</td>
                {% if usr_role == "Admin" %}
              <td> Remove Course Assignment </td>
                {% endif %}
            </tr>
            {% endfor %}
    </table>
    {% endif %}

            <br>
            <br>
            Assigned Section(s):
            <br>
            <br>

        {% if not sections.all%}
        <p>User is not assigned to any sections</p>
        {% elif curr_user.role == "Teacher-Assistant" and lab_check == "False" %}
            <p>User is not assigned to any lab sections</p>
        {% else %}
            <table>
            <br>
            <tr>
              <th>Course</th>
              <th>Section ID</th>
              <th>Type</th>
                {% if usr_role == "Admin" or usr_role == "Instructor" %}
              <th> Remove Assignment </th>
                {% endif %}
            </tr>
          {%for section in curr_user.assigned_section.all %}
              {% if section.type == "lab" and curr_user.role == "Teacher-Assistant"%}
            <tr>
              <td>{{ section.course_parent.course_name }} {{ section.course_parent.course_id }}</td>
              <td>{{ section.section_id }}</td>
              <td>{{ section.type }}</td>
                {% if usr_role == "Admin" or user.role == "Instructor" %}
              <td> Remove Assignment </td>
                {% endif %}
            </tr>
              {% endif %}
               {% if section.type == "lecture" and curr_user.role == "Instructor"%}
            <tr>
              <td>{{ section.course_parent.course_name }} {{ section.course_parent.course_id }}</td>
              <td>{{ section.section_id }}</td>
              <td>{{ section.type }}</td>
                {% if usr_role == "Admin" or user.role == "Instructor" %}
              <td> Remove Assignment </td>
                {% endif %}
            </tr>
              {% endif %}
            {% endfor %}
        </table>
    {% endif %}
        {% if usr_role == "Admin" or usr_role == "Instructor" %}
            <br>
            <br>
            {% if usr_role == "Admin" %}
            Add Courses:
                {% if not selectableCourses  %}
                    <p> users is signed up for all courses or there are no courses to be assigned to</p>
                    {% else %}
            <td><select id="section-id" name="section">
                <option value="">None</option>
              {% for newsection in selectableCourses %}
                <option value="{{newsection.pk}}">Course: {{newsection.course_parent}} || Section Type: {{newsection.type}} || Section ID: {{newsection.section_id}} 
                    || Section Schedule: {% for day in newsection.meeting_days.all %}
                            {{ day }}
                        {% endfor %} || {{ newsection.start_time }} - {{ newsection.end_time}}
              {% endfor %}

          </select></td>
                    {% endif %}
                {% endif %}
            <br>
            {% if usr_role == "Admin" or usr_role == "Instructor" %}
                {% if curr_user.role != "Instructor" %}
                <br>
            Add Section:
                {% if not selectableSections  %}
                    <p> User is signed up for all the lab sections in their course(s)
                    or there are no lab sections to sign up for their in their course(s)</p>
                    {% else %}
            <td><select id="section-id" name="section">
                <option value="">None</option>
                {% for newsection in selectableSections %}
                <option value="{{newsection.pk}}">Course: {{newsection.course_parent}} || Section Type: {{newsection.type}} || Section ID: {{newsection.section_id}} 
                || Section Schedule: {% for day in newsection.meeting_days.all %}
                            {{ day }}
                        {% endfor %} || {{ newsection.start_time }} - {{ newsection.end_time}}</option>
                {% endfor %}
          </select></td>
                    {% endif %}
                {% endif %}
                {% endif %}
            <br>
            <br>
          <input type="submit" value="Submit">
        <br>
            {{ message }}
        {% endif %}
      <br>
      <a href = "/Home/accountList/"> Go Back </a><br>
      <br>
      <a href = "/Home/"> Go Home </a> <br>
    </div>
</form>
</body>
</html>
