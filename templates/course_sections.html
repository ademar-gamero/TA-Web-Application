
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
      <style>
        .center {
            text-align:center;
            margin-left: auto;
            margin-right: auto;
            width: 80%;

        }
        .center2 {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }
        .center3 {
            margin: auto;
            width: 100%;
        }
         table,th,td{
            border: 1px solid black;
            padding: 5px;
            border-collapse: collapse;
        }
    </style>
    <title>Course Section Assignments</title>
  </head>
<body>
<h1 class = "center"> Course {{course.course_id}} {{course.course_name}} Sections </h1>
  <div class = "center2" align="center">
  {%for section in sections %}
      <table>
      <br>
      <tr>
          <th>Type</th>
        <th>Section ID</th>
        <th>Meeting Days</th>
        <th> Meeting Time </th>
        <th>Location</th>
        {% if usr_role == "Admin"%}
            <th> Edit Section Info </th>
            <th>Delete Section</th>
        {% endif %}
        </tr>
            <tr>
                <td>{% if section.type == "lab" %}
                        Lab
                    {% else %}
                        Lecture
                    {% endif %}    
                </td>
              <td>{{ section.section_id }}</td>
                <td>{% for day in section.meeting_days.all %}
                        {{ day }}
                    {% endfor %}
                    </td>
                <td>{{ section.start_time }} - {{ section.end_time }}</td>
                <td>{{ section.location }}</td>
                {% if usr_role == "Admin"%}
              <td> edit section info link </td>
              <td> delete link </td>
                {% endif %}
            </tr>
            </table>
            <br>
            <table>
            {{section}}'s Assigned Users:
            <tr>  
              <th>Name</th>
              <th>Username</th>
              <th>Role</th>
              <th>Email</th>
              <th>Remove Assignment</th>
            </tr>
              {% for user in section.assigned_users.all %}
                  {% if section.type == "lecture" and user.role != "Teacher-Assistant"%}
                  <tr>
                    <td> {{user.name}} </td>
                    <td> {{user.username}} </td>
                    <td> {{user.role}} </td>
                    <td> {{user.email}} </td>
                    {% if usr_role == "Admin" or usr_role == "Instructor" %}
                    <td> Remove Assignment </td>
                    {% endif %}
                    {% endif %}
                      {% if section.type == "lab" and user.role == "Teacher-Assistant"%}
                  <tr>
                    <td> {{user.name}} </td>
                    <td> {{user.username}} </td>
                    <td> {{user.role}} </td>
                    <td> {{user.email}} </td>
                    {% if usr_role == "Admin" or usr_role == "Instructor" %}
                    <td> Remove Assignment </td>
                    {% endif %}
                  </tr>
                  {% endif %}
                  {% endfor %}
            </table>
              <form action="/Home/courseList/courseSection/{{course.pk}}/" method="post">
                {% csrf_token %}
                  <br>
                {%if usr_role == "Instructor"%}
                Add Teacher Assistants:
                  </br>
                  <select id = "{{section.pk}}" name="{{section.pk}}">
                        <option value=None>None</option>
                      {%for ta in ta_pool%}
                          <option value="{{ta.pk}}">{{ta}}</option>
                      {% endfor %}
                  </select>
                  {% endif %}
                {%if usr_role == "Admin"%}
                Add Instructors:
                  <select id = "{{section.pk}}" name="{{section.pk}}">
                      <option value=None>None</option>
                      {%for ins in ins_all %}
                      <option value="{{ins.pk}}">{{ins}}</option>
                      {% endfor %}
                  </select>
                <br>
                <br>
                Add Teacher Assistants:
                  <select id = "{{section.pk}}" name="{{section.pk}}">
                      <option value=None>None</option>
                      {%for tas in ta_all %}
                      <option value="{{tas.pk}}">{{tas}}</option>
                      {% endfor %}
                  </select>
                {% endif %}
                <br>
      {% endfor %}
                <br>
                <input type="submit" value="Submit">
              </form>
                <br>
                  {{message}}
              <br>
              <br>
        <a href = "/Home/courseList/"> Go Back </a>
        <br>
      <br>
      <a href = "/Home/"> Go Home </a>
  </div>